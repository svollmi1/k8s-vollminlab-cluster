apiVersion: v1
kind: ConfigMap
metadata:
  name: minecraft-values
  namespace: dmz
  labels:
    app: minecraft
    env: production
    category: gaming
data:
  values.yaml: |
    image:
      repository: itzg/minecraft-server
      tag: latest
    
    resources:
      requests:
        cpu: 2000m
        memory: 6Gi
      limits:
        cpu: 4000m
        memory: 8Gi
    
    nodeSelector:
      kubernetes.io/hostname: k8sworker05
    
    persistence:
      dataDir:
        enabled: true
        Size: 20Gi
      storageClass: longhorn
    
    minecraftServer:
      eula: "TRUE"
      type: "PAPER"
      memory: "6G"
      viewDistance: 8
      maxPlayers: 20
      difficulty: normal
      serviceType: NodePort
      nodePort: 32565
      externalTrafficPolicy: Local
      rcon:
        enabled: false
      extraEnv:
        SIMULATION_DISTANCE: "6"
    
    readinessProbe:
      initialDelaySeconds: 30
      periodSeconds: 10
      failureThreshold: 10
      successThreshold: 1
      timeoutSeconds: 1
    
    livenessProbe:
      initialDelaySeconds: 30
      periodSeconds: 5
      failureThreshold: 10
      successThreshold: 1
      timeoutSeconds: 1
